



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
        <meta name="description" content="Guide for openstack-ansible Deployers">
      
      
        <link rel="canonical" href="https://ostackdoc.github.io/network-architectures/">
      
      
        <meta name="author" content="Chinthaka Deshapriya">
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.0.2">
    
    
      
        <title>Network Architectures - Openstack Ansible Deployment Guide</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/application.982221ab.css">
      
        <link rel="stylesheet" href="../assets/stylesheets/application-palette.224b79ff.css">
      
      
        
        
        <meta name="theme-color" content="#3f51b5">
      
    
    
      <script src="../assets/javascripts/modernizr.1f0bcf2b.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../assets/fonts/material-icons.css">
    
      <link rel="manifest" href="../manifest.webmanifest">
    
    
      <link rel="stylesheet" href="../extra.css">
    
    
      
        
<script>
  window.ga = window.ga || function() {
    (ga.q = ga.q || []).push(arguments)
  }
  ga.l = +new Date
  /* Setup integration and send page view */
  ga("create", "UA-136248088-1", "ostackdoc.github.io")
  ga("set", "anonymizeIp", true)
  ga("send", "pageview")
  /* Register handler to log search on blur */
  document.addEventListener("DOMContentLoaded", () => {
    if (document.forms.search) {
      var query = document.forms.search.query
      query.addEventListener("blur", function() {
        if (this.value) {
          var path = document.location.pathname;
          ga("send", "pageview", path + "?q=" + this.value)
        }
      })
    }
  })
</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
      
    
    
  </head>
  
    
    
    <body dir="ltr" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448"
    viewBox="0 0 416 448" id="__github">
  <path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19-18.125
        8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19 18.125-8.5
        18.125 8.5 10.75 19 3.125 20.5zM320 304q0 10-3.125 20.5t-10.75
        19-18.125 8.5-18.125-8.5-10.75-19-3.125-20.5 3.125-20.5 10.75-19
        18.125-8.5 18.125 8.5 10.75 19 3.125 20.5zM360
        304q0-30-17.25-51t-46.75-21q-10.25 0-48.75 5.25-17.75 2.75-39.25
        2.75t-39.25-2.75q-38-5.25-48.75-5.25-29.5 0-46.75 21t-17.25 51q0 22 8
        38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0
        37.25-1.75t35-7.375 30.5-15 20.25-25.75 8-38.375zM416 260q0 51.75-15.25
        82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5-41.75
        1.125q-19.5 0-35.5-0.75t-36.875-3.125-38.125-7.5-34.25-12.875-30.25-20.25-21.5-28.75q-15.5-30.75-15.5-82.75
        0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25
        30.875q36.75-8.75 77.25-8.75 37 0 70 8 26.25-20.5
        46.75-30.25t47.25-9.75q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34
        99.5z" />
</svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#management_network" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="https://ostackdoc.github.io" title="Openstack Ansible Deployment Guide" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Openstack Ansible Deployment Guide
            </span>
            <span class="md-header-nav__topic">
              Network Architectures
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/ostackdoc/ostackdoc-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    ostackdoc/ostackdoc-docs
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="https://ostackdoc.github.io" title="Openstack Ansible Deployment Guide" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Openstack Ansible Deployment Guide
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/ostackdoc/ostackdoc-docs/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    ostackdoc/ostackdoc-docs
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href=".." title="Introduction" class="md-nav__link">
      Introduction
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../overview/" title="Overview" class="md-nav__link">
      Overview
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Network Architectures
      </label>
    
    <a href="./" title="Network Architectures" class="md-nav__link md-nav__link--active">
      Network Architectures
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#management_network" title="Management Network" class="md-nav__link">
    Management Network
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overlay_network" title="Overlay Network" class="md-nav__link">
    Overlay Network
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage_network" title="Storage Network" class="md-nav__link">
    Storage Network
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network_interfaces" title="Network Interfaces" class="md-nav__link">
    Network Interfaces
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single_interface_or_bond" title="Single Interface or Bond" class="md-nav__link">
    Single Interface or Bond
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#single_bond_sample_network_configuration" title="Single Bond Sample Network Configuration" class="md-nav__link">
    Single Bond Sample Network Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple_interfaces_or_bonds" title="Multiple Interfaces or Bonds" class="md-nav__link">
    Multiple Interfaces or Bonds
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../prepare-deployment-host/" title="Prepare Deployment Host" class="md-nav__link">
      Prepare Deployment Host
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../prepare-the-target-hosts/" title="Prepare the Target Hosts" class="md-nav__link">
      Prepare the Target Hosts
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../test-env-example/" title="Test Environment Example" class="md-nav__link">
      Test Environment Example
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-7" type="checkbox" id="nav-7">
    
    <label class="md-nav__link" for="nav-7">
      Preparing OpenStack Nodes
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-7">
        Preparing OpenStack Nodes
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../install-node-os/" title="Installing Node OS" class="md-nav__link">
      Installing Node OS
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configure-node-network/" title="Configuring Node Network" class="md-nav__link">
      Configuring Node Network
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#management_network" title="Management Network" class="md-nav__link">
    Management Network
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#overlay_network" title="Overlay Network" class="md-nav__link">
    Overlay Network
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#storage_network" title="Storage Network" class="md-nav__link">
    Storage Network
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#network_interfaces" title="Network Interfaces" class="md-nav__link">
    Network Interfaces
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#single_interface_or_bond" title="Single Interface or Bond" class="md-nav__link">
    Single Interface or Bond
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#single_bond_sample_network_configuration" title="Single Bond Sample Network Configuration" class="md-nav__link">
    Single Bond Sample Network Configuration
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multiple_interfaces_or_bonds" title="Multiple Interfaces or Bonds" class="md-nav__link">
    Multiple Interfaces or Bonds
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ostackdoc/ostackdoc-docs/edit/master/docs/network-architectures.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                  <h1>Network Architectures</h1>
                
                <p>OpenStack-Ansible supports a number of different network architectures, and can be deployed using a single network interface for non-production workloads or using multiple network interfaces or bonded interfaces for production workloads.</p>
<p>Our OpenStack-Ansible production environment reference architectures in this guide segments traffic using VLANs across multiple network interfaces or bonds.</p>
<p>The default networks used in an OpenStack-Ansible in this deployment can be observed in the following table:</p>
<table>
<thead>
<tr>
<th><strong>Network</strong></th>
<th><strong>CIDR</strong></th>
<th><strong>VLAN</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td>Management Network</td>
<td><code>172.29.236.0/22</code></td>
<td><code>10</code></td>
</tr>
<tr>
<td>Overlay Network</td>
<td><code>172.29.240.0/22</code></td>
<td><code>30</code></td>
</tr>
<tr>
<td>Storage Network</td>
<td><code>172.29.244.0/22</code></td>
<td><code>20</code></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Unless, if we specifically do mention about a new network architecture  we will be referring to the same network architecture above through out this document.</p>
</div>
<h3 id="management_network">Management Network<a class="headerlink" href="#management_network" title="Permanent link">&para;</a></h3>
<p>The <code>Management Network</code>, also referred to as the <code>Container network</code>, provides management of and communication between the infrastructure and OpenStack services running in containers or on metal. The management network uses a dedicated <code>VLAN</code> typically connected to the <code>br-mgmt</code> bridge, and may also be used as the primary interface used to interact with the server via <code>SSH</code>.</p>
<h3 id="overlay_network">Overlay Network<a class="headerlink" href="#overlay_network" title="Permanent link">&para;</a></h3>
<p>The <code>Overlay Network</code>, also referred to as the <code>Tunnel Network</code>, provides connectivity between hosts for the purpose of <code>tunneling</code> encapsulated traffic using <code>VXLAN</code>, <code>GRE</code>, or other protocols. The <code>Overlay Network</code> uses a dedicated <code>VLAN</code> typically connected to the <code>br-vxlan</code> bridge.</p>
<h3 id="storage_network">Storage Network<a class="headerlink" href="#storage_network" title="Permanent link">&para;</a></h3>
<p>The <code>Storage Network</code> provides segregated access to Block Storage from OpenStack services such as <code>Cinder, Glance, Ceph</code>, etc.. The <code>Storage Network</code> uses a dedicated <code>VLAN</code> typically connected to the <code>br-storage</code> bridge.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code>CIDRs</code> and <code>VLANs</code> listed for each network are examples and may be different in your environment.</p>
</div>
<p>Additional <code>VLANs</code> may be required for the following purposes:</p>
<ul>
<li>External provider networks for <code>Floating IPs</code> and instances</li>
<li>Self-service <code>Project/Tenant</code> networks for instances</li>
<li>Other OpenStack services</li>
</ul>
<h3 id="network_interfaces">Network Interfaces<a class="headerlink" href="#network_interfaces" title="Permanent link">&para;</a></h3>
<h4 id="single_interface_or_bond">Single Interface or Bond<a class="headerlink" href="#single_interface_or_bond" title="Permanent link">&para;</a></h4>
<p>OpenStack-Ansible supports the use of a <code>single</code> interface or set of <code>bonded</code> interfaces that carry <code>traffic</code> for OpenStack services as well as instances.</p>
<p>The following diagram demonstrates hosts using a single interface:</p>
<p><img alt="" src="../img/single-interface.jpg" /></p>
<p>The following diagram demonstrates hosts using a single bond:</p>
<p><img alt="" src="../img/single-bond-interface.jpg" /></p>
<h4 id="single_bond_sample_network_configuration">Single Bond Sample Network Configuration<a class="headerlink" href="#single_bond_sample_network_configuration" title="Permanent link">&para;</a></h4>
<p>Each host will require the correct network bridges to be implemented.</p>
<p>The following is the <code>/etc/network/interfaces</code> file for <code>infra1</code> control plane host using a single bond in a Ubuntu host.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your environment does not have eth0, but instead has p1p1 or some other interface name, ensure that all references to eth0 in all configuration files are replaced with the appropriate name. The same applies to additional network interfaces.</p>
<p>Please refer to <a href="/prepare-deployment-host/#configure_the_network_interfaces">Configuring Network Interfaces</a> for more details.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This is a multi-NIC bonded configuration to implement the required bridges for OpenStack-Ansible. This illustrates the configuration of the first Infrastructure host <code>infra1</code> and the IP addresses assigned should be adapted for implementation on the other hosts.  After implementing this configuration, the host will need to be rebooted.</p>
<p>Assuming that eth0/1 and eth2/3 are dual port NIC's we pair <code>eth0</code> with <code>eth2</code> for increased resiliency in the case of one interface card failing.</p>
</div>
<div class="codehilite"><pre><span></span>auto eth0

iface eth0 inet manual
    bond-master bond0
    bond-primary eth0

auto eth1
iface eth1 inet manual

auto eth2
iface eth2 inet manual
    bond-master bond0

auto eth3
iface eth3 inet manual

# Create a bonded interface. Note that the &quot;bond-slaves&quot; is set to none. This
# is because the bond-master has already been set in the raw interfaces for
# the new bond0.

auto bond0
iface bond0 inet manual
    bond-slaves none
    bond-mode active-backup
    bond-miimon 100
    bond-downdelay 200
    bond-updelay 200

# Container/Host management VLAN interface

auto bond0.10
iface bond0.10 inet manual
    vlan-raw-device bond0

# OpenStack Networking VXLAN (tunnel/overlay) VLAN interface

auto bond0.30
iface bond0.30 inet manual
    vlan-raw-device bond0

# Storage network VLAN interface (optional)

auto bond0.20
iface bond0.20 inet manual

# Container/Host management bridge

auto br-mgmt
iface br-mgmt inet static
    bridge_stp off
    bridge_waitport 0
    bridge_fd 0
    bridge_ports bond0.10
    address 172.29.236.11
    netmask 255.255.252.0
    gateway 172.29.236.1
    dns-nameservers 8.8.8.8 8.8.4.4

# OpenStack Networking VXLAN (tunnel/overlay) bridge
#
# Nodes hosting Neutron agents must have an IP address on this interface,
# including COMPUTE, NETWORK, and collapsed INFRA/NETWORK nodes.
#

auto br-vxlan
iface br-vxlan inet static
    bridge_stp off
    bridge_waitport 0
    bridge_fd 0
    bridge_ports bond0.30
    address 172.29.240.16
    netmask 255.255.252.0

# OpenStack Networking VLAN bridge
#
# The &quot;br-vlan&quot; bridge is no longer necessary for deployments unless Neutron
# agents are deployed in a container. Instead, a direct interface such as
# bond0 can be specified via the &quot;host_bind_override&quot; override when defining
# provider networks.
#
#auto br-vlan
#iface br-vlan inet manual
#    bridge_stp off
#    bridge_waitport 0
#    bridge_fd 0
#    bridge_ports bond0

# compute1 Network VLAN bridge
#auto br-vlan
#iface br-vlan inet manual
#    bridge_stp off
#    bridge_waitport 0
#    bridge_fd 0
#

# Storage bridge (optional)
#
# Only the COMPUTE and STORAGE nodes must have an IP address
# on this bridge. When used by infrastructure nodes, the
# IP addresses are assigned to containers which use this
# bridge.
#
auto br-storage
iface br-storage inet manual
    bridge_stp off
    bridge_waitport 0
    bridge_fd 0
    bridge_ports bond0.20

# compute1 Storage bridge

#auto br-storage
#iface br-storage inet static
#    bridge_stp off#auto br-storage
#    bridge_waitport 0
#    bridge_fd 0
#    bridge_ports bond0.20
#    address 172.29.244.16
#    netmask 255.255.252.0
</pre></div>


<h4 id="multiple_interfaces_or_bonds">Multiple Interfaces or Bonds<a class="headerlink" href="#multiple_interfaces_or_bonds" title="Permanent link">&para;</a></h4>
<p>OpenStack-Ansible supports the use of a multiple interfaces or sets of bonded interfaces that carry traffic for OpenStack services and instances.</p>
<p>The following diagram demonstrates hosts using multiple interfaces:</p>
<p><img alt="" src="../img/multiple-interfaces.jpg" /></p>
<p>The following diagram demonstrates hosts using multiple bonds:</p>
<p><img alt="" src="../img/multiple-interfaces.jpg" /></p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If your environment does not have <code>eth0</code>, but instead has <code>p1p1</code> or some other interface name, ensure that all references to eth0 in all configuration files are replaced with the appropriate name. The same applies to additional network interfaces.</p>
<p>Please refer to <a href="/prepare-deployment-host/#configure_the_network_interfaces">Configuring Network Interfaces</a> for more details.</p>
</div>
<div class="admonition important">
<p class="admonition-title">Important</p>
<p>This is a multi-NIC bonded configuration to implement the required bridges for OpenStack-Ansible. This illustrates the configuration of the first Infrastructure host <code>infra1</code> and the IP addresses assigned should be adapted for implementation on the other hosts.  After implementing this configuration, the host will need to be rebooted.</p>
<p>Assuming that eth0/1 and eth2/3 are dual port NIC's we pair <code>eth0</code> with <code>eth2</code> for increased resiliency in the case of one interface card failing.</p>
</div>
<div class="codehilite"><pre><span></span>auto eth0
iface eth0 inet manual
    bond-master bond0
    bond-primary eth0

auto eth1
iface eth1 inet manual
    bond-master bond1
    bond-primary eth1

auto eth2
iface eth2 inet manual
    bond-master bond0

auto eth3
iface eth3 inet manual
    bond-master bond1

# Create a bonded interface. Note that the &quot;bond-slaves&quot; is set to none. This
# is because the bond-master has already been set in the raw interfaces for
# the new bond0.
auto bond0
iface bond0 inet manual
    bond-slaves none
    bond-mode active-backup
    bond-miimon 100
    bond-downdelay 200
    bond-updelay 200

# This bond will carry VLAN and VXLAN traffic to ensure isolation from
# control plane traffic on bond0.
auto bond1
iface bond1 inet manual
    bond-slaves none
    bond-mode active-backup
    bond-miimon 100
    bond-downdelay 250
    bond-updelay 250

# Container/Host management VLAN interface
auto bond0.10
iface bond0.10 inet manual
    vlan-raw-device bond0

# OpenStack Networking VXLAN (tunnel/overlay) VLAN interface
auto bond1.30
iface bond1.30 inet manual
    vlan-raw-device bond1

# Storage network VLAN interface (optional)
auto bond0.20
iface bond0.20 inet manual
    vlan-raw-device bond0

# Container/Host management bridge
auto br-mgmt
iface br-mgmt inet static
    bridge_stp off
    bridge_waitport 0
    bridge_fd 0
    bridge_ports bond0.10
    address 172.29.236.11
    netmask 255.255.252.0
    gateway 172.29.236.1
    dns-nameservers 8.8.8.8 8.8.4.4

# OpenStack Networking VXLAN (tunnel/overlay) bridge
#
# Nodes hosting Neutron agents must have an IP address on this interface,
# including COMPUTE, NETWORK, and collapsed INFRA/NETWORK nodes.
#

auto br-vxlan
iface br-vxlan inet static
    bridge_stp off
    bridge_waitport 0
    bridge_fd 0
    bridge_ports bond1.30
    address 172.29.240.16
    netmask 255.255.252.0

# OpenStack Networking VLAN bridge
#
# The &quot;br-vlan&quot; bridge is no longer necessary for deployments unless Neutron
# agents are deployed in a container. Instead, a direct interface such as
# bond1 can be specified via the &quot;host_bind_override&quot; override when defining
# provider networks.
#
#auto br-vlan
#iface br-vlan inet manual
#    bridge_stp off
#    bridge_waitport 0
#    bridge_fd 0
#    bridge_ports bond1

# compute1 Network VLAN bridge
#auto br-vlan
#iface br-vlan inet manual
#    bridge_stp off
#    bridge_waitport 0
#    bridge_fd 0
#

# Storage bridge (optional)
#
# Only the COMPUTE and STORAGE nodes must have an IP address
# on this bridge. When used by infrastructure nodes, the
# IP addresses are assigned to containers which use this
# bridge.
#
auto br-storage
iface br-storage inet manual
    bridge_stp off
    bridge_waitport 0
    bridge_fd 0
    bridge_ports bond0.20

# compute1 Storage bridge
#auto br-storage
#iface br-storage inet static
#    bridge_stp off
#    bridge_waitport 0
#    bridge_fd 0
#    bridge_ports bond0.20
#    address 172.29.244.16
#    netmask 255.255.252.0
</pre></div>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../overview/" title="Overview" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Overview
              </span>
            </div>
          </a>
        
        
          <a href="../prepare-deployment-host/" title="Prepare Deployment Host" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Prepare Deployment Host
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
          <div class="md-footer-copyright__highlight">
            Copyright &copy; 2018 - 2019 Chinthaka Deshapriya
          </div>
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
  <div class="md-footer-social">
    <link rel="stylesheet" href="../assets/fonts/font-awesome.css">
    
      <a href="https://github.com/ostackdoc" class="md-footer-social__link fa fa-github"></a>
    
      <a href="https://twitter.com/ostackdoc" class="md-footer-social__link fa fa-twitter"></a>
    
      <a href="https://linkedin.com/in/ostackdoc" class="md-footer-social__link fa fa-linkedin"></a>
    
  </div>

    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../assets/javascripts/application.d9aa80ab.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:".."}})</script>
      
    
  </body>
</html>